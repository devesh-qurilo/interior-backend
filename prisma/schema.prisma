generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/* HOME: editable blocks shown on landing page */
model HomeSection {
  id        Int      @id @default(autoincrement())
  key       String   @unique   // e.g., "hero", "features", "cta"
  title     String?
  content   String?            // markdown or rich text JSON
  mediaUrl  String?
  order     Int      @default(0)
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

/* SERVICES: list of services with description */
model Service {
  id          Int      @id @default(autoincrement())
  name        String
  slug        String   @unique
  summary     String?
  description String?
  icon        String?  // icon name/url
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  updatedAt   DateTime @updatedAt
  createdAt   DateTime @default(now())
}

/* PROJECTS: portfolio items */
model Project {
  id               Int       @id @default(autoincrement())
  slug             String    @unique
  title            String
  description      String?
  propertyType     String?
  area             String?
  layout           String?
  location         String?
  designHighlights String[]
  beforeImageUrl   String[]
  afterImageUrl    String[]
  imageUrl         String[]
  isFeatured       Boolean   @default(false)
  featuredOrder    Int?                      // <— add this
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}

/* CONTACT: incoming messages from the form */
model ContactMessage {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  phone     String?
  subject   String?
  message   String
  createdAt DateTime @default(now())
}

/* QUOTATION: quote requests from the form */
model QuotationRequest {
  id            Int      @id @default(autoincrement())
  name          String
  email         String
  phone         String?
  serviceSlug   String?  // which service they’re asking about
  budgetMin     Int?     // simple number fields for now
  budgetMax     Int?
  description   String?  // brief requirements
  createdAt     DateTime @default(now())
}




model HomeStat {
  id        Int      @id @default(autoincrement())
  key       String   @unique           // "projects_completed", "years_experience", etc.
  label     String                     // "Projects Completed"
  value     Int                         // 500
  suffix    String?                     // "+", "%"
  order     Int      @default(0)        // display order
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}



model RecentProject {
  id               Int       @id @default(autoincrement())
  slug             String    @unique
  title            String
  description      String?
  propertyType     String?
  area             String?      // e.g., "1200 sq ft"
  layout           String?      // e.g., "2BHK"
  location         String?
  designHighlights String[]     // bullet points
  beforeImageUrl   String[]
  afterImageUrl    String[]
  isFeatured       Boolean   @default(false)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  imageUrl        String[]
}


model FeatureProject {
  id               Int       @id @default(autoincrement())
  slug             String    @unique
  title            String
  description      String?
  propertyType     String?
  area             String?      // e.g., "1200 sq ft"
  layout           String?      // e.g., "2BHK"
  location         String?
  designHighlights String[]     // bullet points
  beforeImageUrl   String[]
  afterImageUrl    String[]
  isFeatured       Boolean   @default(false)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  imageUrl        String[]
}



model HomeTestimonial {
  id            Int      @id @default(autoincrement())
  userName      String
  userLocation  String?
  userReview    String   // long text is fine
  userProfile   String?  // avatar URL
  image         String?  // optional banner/photo of project
  order         Int      @default(0)  // display order
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}



model ProjectVideo {
  id           Int      @id @default(autoincrement())
  title        String
  videoUrl     String            // mp4 link, Vimeo, YouTube, etc.
  thumbnailUrl String?           // optional preview image
  projectSlug  String?           // optional: tie to a specific project page
  order        Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}




enum InquiryStatus {
  NEW
  CONTACTED
  CLOSED
}

model ContactInquiry {
  id            Int      @id @default(autoincrement())
  name          String
  email         String
  contactNo     String?
  projectType   String?
  propertyType  String?
  totalArea     String?
  numberOfRoom  Int?
  budgetsRange  String?
  timeToStart   String?
  message       String
  status        InquiryStatus @default(NEW)   // <-- NEW
  createdAt     DateTime @default(now())
  notes         InquiryNote[]                 // <-- NEW (relation)
}

model InquiryNote {
  id         Int      @id @default(autoincrement())
  inquiryId  Int
  body       String
  adminName  String?     // or adminId if you add Admin relation
  createdAt  DateTime @default(now())

  inquiry    ContactInquiry @relation(fields: [inquiryId], references: [id], onDelete: Cascade)
}




model AdminUser {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String?
  avatarUrl String?          // <— NEW
  createdAt DateTime @default(now())
}